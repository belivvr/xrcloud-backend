{
    "openapi": "3.0.0",
    "info": {
        "title": "XRCLOUD API",
        "version": "1.0",
        "x-logo": {
            "url": "https://kr.object.ncloudstorage.com/xrcloud-prod-backend/belivvr.png",
            "href": "https://xrcloud.app"
        }
    },
    "tags": [
        {
            "name": "authentication",
            "x-displayName": "Authentication",
            "description": "All API calls in this document require an `ApiKey`. \n\n - `ApiKey` can be issued from My page in the upper right corner of the page after logging in to XRCLOUD page."
        },
        {
            "name": "project",
            "x-displayName": "Project",
            "description": "Project in XRCLOUD, which can be a developer's project, platform, 3rd-party app, etc. \n\n - `webhookUrl` can be set when creating a project or modifying information on the XRCLOUD page."
        },
        {
            "name": "scene",
            "x-displayName": "Scene",
            "description": "Scene creation: Accessed by the return value of [get creation url](#operation/GetSceneCreationUrl) api and created in the editor (Spoke). \n\n Modify Scene: Modify it using sceneModificationUrl in the response json field of [get scene api](#operation/GetScene). \n\n - The `optId` value is a callback value to confirm the creation and modification of the scene in XRCLOUD. If you use it with variations, an error may occur."
        },
        {
            "name": "room",
            "x-displayName": "Room"
        }
    ],
    "x-tagGroups": [
        {
            "name": "General",
            "tags": [
                "authentication"
            ]
        },
        {
            "name": "API",
            "tags": [
                "project",
                "scene",
                "room"
            ]
        }
    ],
    "paths": {
        "/api/projects/{project_id}": {
            "get": {
                "tags": [
                    "project"
                ],
                "operationId": "GetProject",
                "summary": "get project",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Project"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/scenes": {
            "get": {
                "tags": [
                    "scene"
                ],
                "operationId": "GetScenes",
                "summary": "get scenes",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    },
                    {
                        "$ref": "#/components/parameters/ProjectId"
                    },
                    {
                        "$ref": "#/components/parameters/Name"
                    },
                    {
                        "$ref": "#/components/parameters/Creator"
                    },
                    {
                        "$ref": "#/components/parameters/PaginationTake"
                    },
                    {
                        "$ref": "#/components/parameters/PaginationSkip"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetScenesSuccessResponse"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/scenes/get-creation-url": {
            "get": {
                "tags": [
                    "scene"
                ],
                "operationId": "GetSceneCreationUrl",
                "summary": "get creation url",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    },
                    {
                        "$ref": "#/components/parameters/ProjectId"
                    },
                    {
                        "$ref": "#/components/parameters/SceneCreateCreator"
                    },
                    {
                        "$ref": "#/components/parameters/SceneCreateCallback"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetSceneCreationUrlSuccessResponse"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/scenes/{scene_id}": {
            "get": {
                "tags": [
                    "scene"
                ],
                "operationId": "GetScene",
                "summary": "get scene",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Scene"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "scene"
                ],
                "operationId": "RemoveScene",
                "summary": "remove scene",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rooms": {
            "post": {
                "tags": [
                    "room"
                ],
                "operationId": "CreateRoom",
                "summary": "create room",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateRoomRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Room"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "room"
                ],
                "operationId": "GetRooms",
                "summary": "get rooms",
                "description": "That API must be called with either a projectId or a sceneId.",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    },
                    {
                        "$ref": "#/components/parameters/RoomProjectId"
                    },
                    {
                        "$ref": "#/components/parameters/RoomSceneId"
                    },
                    {
                        "$ref": "#/components/parameters/Name"
                    },
                    {
                        "$ref": "#/components/parameters/UserId"
                    },
                    {
                        "$ref": "#/components/parameters/AvatarUrl"
                    },
                    {
                        "$ref": "#/components/parameters/PaginationTake"
                    },
                    {
                        "$ref": "#/components/parameters/PaginationSkip"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetRoomsSuccessResponse"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rooms/{room_id}": {
            "get": {
                "tags": [
                    "room"
                ],
                "operationId": "GetRoom",
                "summary": "get room",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    },
                    {
                        "$ref": "#/components/parameters/UserId"
                    },
                    {
                        "$ref": "#/components/parameters/AvatarUrl"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Room"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "tags": [
                    "room"
                ],
                "operationId": "UpdateRoom",
                "summary": "update room",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateRoomRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Room"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "room"
                ],
                "operationId": "RemoveRoom",
                "summary": "remove room",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/rooms/{room_id}/logs": {
            "get": {
                "tags": [
                    "room"
                ],
                "operationId": "GetRoomLogs",
                "summary": "get room logs",
                "parameters": [
                    {
                        "$ref": "#/components/parameters/ApiKey"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/GetRoomLogsSuccessResponse"
                                }
                            }
                        }
                    },
                    "default": {
                        "description": "This can be a 4XX or 5XX error depending on the situation.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ErrorResponse"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "parameters": {
            "ApiKey": {
                "required": true,
                "name": "X-XRCLOUD-API-KEY",
                "in": "header",
                "schema": {
                    "type": "string"
                },
                "description": "The header must contain the following `X-XRCLOUD-API-KEY: ${ApiKey}`."
            },
            "PaginationTake": {
                "required": false,
                "name": "take",
                "in": "query",
                "description": "(pagination) number of rows to get.",
                "schema": {
                    "type": "number"
                }
            },
            "PaginationSkip": {
                "required": false,
                "name": "skip",
                "in": "query",
                "description": "(pagination) number of rows to skip.",
                "schema": {
                    "type": "number"
                }
            },
            "ProjectId": {
                "required": true,
                "name": "projectId",
                "in": "query",
                "schema": {
                    "type": "uuid"
                },
                "description": "The unique ID of the project."
            },
            "SceneId": {
                "required": true,
                "name": "sceneId",
                "in": "query",
                "schema": {
                    "type": "uuid"
                },
                "description": "The unique ID of the scene."
            },
            "RoomProjectId": {
                "required": false,
                "name": "projectId",
                "in": "query",
                "schema": {
                    "type": "uuid"
                },
                "description": "The unique ID of the project."
            },
            "RoomSceneId": {
                "required": false,
                "name": "sceneId",
                "in": "query",
                "schema": {
                    "type": "uuid"
                },
                "description": "The unique ID of the scene."
            },
            "Name": {
                "required": false,
                "name": "name",
                "in": "query",
                "schema": {
                    "type": "string"
                },
                "description": "(search) Search for Object(s) with that name."
            },
            "Creator": {
                "required": false,
                "name": "creator",
                "in": "query",
                "schema": {
                    "type": "string"
                },
                "description": "(search) Search for Object(s) with that creator."
            },
            "SceneCreateCreator": {
                "required": false,
                "name": "creator",
                "in": "query",
                "schema": {
                    "type": "string"
                },
                "description": "Allows you to specify the creator of the Scene. This is used to distinguish 'My Assets' within the authoring space, and if called to create without including this parameter, the scene will be created identically to the one created by 'Admin'."
            },
            "SceneCreateCallback": {
                "required": false,
                "name": "callback",
                "in": "query",
                "schema": {
                    "type": "string"
                },
                "description": "This is called when a specific behavior is required immediately after a Scene is created, including when a Room is created directly from that Scene. The call on the XRCloud side looks like this. \n\n { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ sceneId }) }",
                "example": "https://api.xrcloud.app/rooms"
            },
            "UserId": {
                "required": false,
                "name": "userId",
                "in": "query",
                "schema": {
                    "type": "string"
                },
                "description": "The user of the project (app). Used to differentiate between users accessing room."
            },
            "AvatarUrl": {
                "required": false,
                "name": "avatarUrl",
                "in": "query",
                "schema": {
                    "type": "string"
                },
                "description": "The path to the avatar file to use in Room.",
                "example": "https://storage.com/bucket/avatar-file.glb"
            }
        },
        "schemas": {
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "statusCode": {
                        "type": "number",
                        "description": "HTTP status code. Actual value will depend on the error.",
                        "example": 400
                    },
                    "method": {
                        "type": "string",
                        "description": "HTTP method of the request that caused the error.",
                        "example": "Method"
                    },
                    "url": {
                        "type": "string",
                        "description": "The endpoint that returned this error. This value will vary depending on the endpoint.",
                        "example": "/example/endpoint"
                    },
                    "body": {
                        "type": "object",
                        "description": "The original data sent in the body of the request that caused the error. The actual value will depend on the request.",
                        "example": { "key": "value" }
                    },
                    "message": {
                        "type": "string",
                        "description": "Detailed error message explaining the error.",
                        "example": "Detailed error messages"
                    }
                }
            },
            "Project": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "(project_id) The unique ID of the project.",
                        "example": "f24ee5ba-8f1f-4f7a-86ed-738f95ea1f8b"
                    },
                    "name": {
                        "type": "string",
                        "description": "The name of the project.",
                        "example": "example project name"
                    },
                    "webhookUrl": {
                        "type": "string",
                        "description": "The endpoint of an external system to which event information is sent when a user enters or exits a room. This URL receives POST requests containing room entry/exit information.",
                        "example": "https://api.xrcloud.app/events/webhook"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when the project was created.",
                        "example": "2023-07-12T09:27:41.600Z"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when the project was last updated.",
                        "example": "2023-07-12T09:27:41.600Z"
                    },
                    "faviconUrl": {
                        "type": "string",
                        "description": "The URL of the project's favicon.",
                        "example": "https://kr.object.ncloudstorage.com/favicon/4a3/4a3e946e-2776-4182-afb7-204d982b727d.ico"
                    },
                    "logoUrl": {
                        "type": "string",
                        "description": "The URL of the project's logo.",
                        "example": "https://kr.object.ncloudstorage.com/favicon/51d/51dc73cc-36db-4046-af8d-1e61e4b59c19.jpg"
                    }
                }
            },
            "Scene": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "(scene_id) The unique ID of the scene.",
                        "example": "f24ee5ba-8f1f-4f7a-86ed-738f95ea1f8b"
                    },
                    "name": {
                        "type": "string",
                        "description": "The name of the scene.",
                        "example": "example scene name"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when the scene was created.",
                        "example": "2023-07-12T09:27:41.600Z"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when the scene was last updated.",
                        "example": "2023-07-12T09:27:41.600Z"
                    },
                    "thumbnailUrl": {
                        "type": "string",
                        "description": "The URL of the scene's thumbnail.",
                        "example": "https://api.xrcloud.app/files/852a6f47-3978-4201-a637-9699d7845266.jpg"
                    },
                    "sceneModificationUrl": {
                        "type": "string",
                        "description": "The URL of the space to modify the scene.",
                        "example": "https://xrcloud.app:4000/spoke/projects/ASJCJK1?token=eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9..."
                    }
                }
            },
            "Room": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "(room_id) The unique ID of the room.",
                        "example": "f24ee5ba-8f1f-4f7a-86ed-738f95ea1f8b"
                    },
                    "name": {
                        "type": "string",
                        "description": "The name of the room.",
                        "example": "example room name"
                    },
                    "size": {
                        "type": "number",
                        "description": "Maximum number of people who can enter a room.",
                        "example": 10
                    },
                    "tags": {
                        "type": "array",
                        "description": "(Before Use) Field to identify a specific Room.",
                        "example": []
                    },
                    "sceneId": {
                        "type": "string",
                        "description": "Id (uuid) of the XRCLOUD Scene.",
                        "example": "c322b49b-6e12-47d9-b293-b5ab3727459c"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when the room was created.",
                        "example": "2023-07-12T09:27:41.600Z"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when the room was last updated.",
                        "example": "2023-07-12T09:27:41.600Z"
                    },
                    "returnUrl": {
                        "type": "string",
                        "description": "The URL to return to when leaving the Room.",
                        "example": "https://www.google.com/"
                    },
                    "roomUrl": {
                        "type": "object",
                        "description": "The URL to enter the room.",
                        "properties": {
                            "public": {
                                "description": "Unable to distinguish between users accessing a public URL whose value does not change.",
                                "properties": {
                                    "host": {
                                        "type": "string",
                                        "description": "Host's room url.",
                                        "example": "https://room.xrcloud.app:4000/7UizZDL/example-room-name?public=35e75895-9db7-4eee-bae3-87e20ee156dc"
                                    },
                                    "guest": {
                                        "type": "string",
                                        "description": "Guest's room url.",
                                        "example": "https://room.xrcloud.app:4000/7UizZDL/example-room-name?public=a0166051-1eee-44bb-922a-c988d517a0e1"
                                    }
                                }
                            },
                            "private": {
                                "description": "Differentiate between users accessing a URL that changes every time they get a URL through 'Get Room'.",
                                "properties": {
                                    "host": {
                                        "type": "string",
                                        "description": "Host's room url.",
                                        "example": "https://room.xrcloud.app:4000/7UizZDL/example-room-name?private=fdc306b9-5129-4d83-86d5-52836afeee7e"
                                    },
                                    "guest": {
                                        "type": "string",
                                        "description": "Guest's room url.",
                                        "example": "https://room.xrcloud.app:4000/7UizZDL/example-room-name?private=72dde871-33d7-4aa3-a8a9-73b8b5f0458d"
                                    }
                                }
                            }
                        }
                    },
                    "thumbnailUrl": {
                        "type": "string",
                        "description": "The URL of the room's thumbnail.",
                        "example": "https://api.xrcloud.app/files/852a6f47-3978-4201-a637-9699d7845266.jpg"
                    }
                }
            },
            "GetScenesSuccessResponse": {
                "type": "object",
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Scene"
                        },
                        "description": "The list of scenes."
                    },
                    "total": {
                        "type": "number",
                        "description": "The total number of scenes."
                    },
                    "skip": {
                        "type": "number",
                        "description": "The number of skipped items for pagination."
                    },
                    "take": {
                        "type": "number",
                        "description": "The number of items to take for pagination."
                    }
                }
            },
            "GetSceneCreationUrlSuccessResponse": {
                "type": "object",
                "properties": {
                    "sceneCreationUrl": {
                        "type": "string",
                        "description": "The URL of the space where you want to create the scene.",
                        "example": "https://room.xrcloud.app:4000/spoke/projects/new?optId=35e75895-9db7-4eee-bae3-87e20ee156dc"
                    }
                }
            },
            "CreateRoomRequest": {
                "type": "object",
                "required": [
                    "projectId",
                    "sceneId",
                    "name",
                    "returnUrl"
                ],
                "properties": {
                    "projectId": {
                        "type": "uuid",
                        "description": "The unique ID of the project.",
                        "example": "f24ee5ba-8f1f-4f7a-86ed-738f95ea1f8b"
                    },
                    "sceneId": {
                        "type": "uuid",
                        "description": "The unique ID of the scene.",
                        "example": "1234e5ba-5678-4f7a-86ed-abcd95ea1efg"
                    },
                    "name": {
                        "type": "string",
                        "description": "The name of the room.",
                        "example": "example room name"
                    },
                    "returnUrl": {
                        "type": "string",
                        "description": "The URL to return to when leaving the Room.",
                        "example": "https://www.google.com/"
                    },
                    "size": {
                        "type": "number",
                        "description": "Maximum number of people who can enter a room.",
                        "example": 10
                    }
                }
            },
            "GetRoomsSuccessResponse": {
                "type": "object",
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Room"
                        },
                        "description": "The list of rooms."
                    },
                    "total": {
                        "type": "number",
                        "description": "The total number of rooms."
                    },
                    "skip": {
                        "type": "number",
                        "description": "The number of skipped items for pagination."
                    },
                    "take": {
                        "type": "number",
                        "description": "The number of items to take for pagination."
                    }
                }
            },
            "GetRoomLogsSuccessResponse": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "number",
                        "description": "The unique ID of the room access log.",
                        "example": "77"
                    },
                    "infraUserId": {
                        "type": "uuid",
                        "description": "The user id of the third party that accessed the room.",
                        "example": "user@domain.com"
                    },
                    "roomId": {
                        "type": "uuid",
                        "description": "The unique ID of the room.",
                        "example": "1234e5ba-5678-4f7a-86ed-abcd95ea1efg"
                    },
                    "sessionId": {
                        "type": "uuid",
                        "description": "The unique ID of the session.",
                        "example": "4f7edfb6-b8a1-4f58-96ee-1deb4da98740"
                    },
                    "joinedAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when user enters a room.",
                        "example": "2023-12-12T09:27:41.600Z"
                    },
                    "exitedAt": {
                        "type": "string",
                        "format": "date-time",
                        "description": "The date and time when user leaves a room.",
                        "example": "2023-12-12T09:30:41.600Z"
                    }
                }
            },
            "UpdateRoomRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "The name of the room.",
                        "example": "example room name"
                    },
                    "size": {
                        "type": "number",
                        "description": "Maximum number of people who can enter a room.",
                        "example": 10
                    },
                    "returnUrl": {
                        "type": "string",
                        "description": "The URL to return to when leaving the Room.",
                        "example": "https://www.google.com/"
                    }
                }
            }
        }
    }
}
